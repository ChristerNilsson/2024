range = _.range
print = console.log

toggle = 0
elo_points = []
swiss_points = []

loadData = (data) ->
	# data = if toggle then elo_data else swiss_data
	lines = data.split "\n"	
	result = []
	for line in lines
		cells = line.split "\t"
		x = parseInt cells[0]
		y = parseInt cells[1]
		result.push [x,y]
	result

window.setup = -> 
	createCanvas windowWidth-20,windowHeight-20
	rectMode CENTER
	textAlign CENTER,CENTER
	textSize 32
	elo_points = loadData elo_data
	swiss_points = loadData swiss_data

window.draw = ->
	background 'gray'

	for i in range -7,8
		stroke if i==0 then 'white' else 'black'
		line 0,0+i*100,1200,1200+i*100

	if toggle in [0,2]
		fill 0,255,0,128
		drawPoints "ELO Pairing",width/2,50,elo_points

	if toggle in [1,2]
		fill 255,0,0,128
		drawPoints "Swiss Pairing",width/2,100,swiss_points

drawPoints = (title,x0,y0,points) ->
	i = 0
	text title,x0,y0
	for [x,y] in points
		size = 2 * sqrt abs x-y
		circle 2450-x, 2450-y, 2 + size
		if x-size/2 < 2450-mouseX < x+size/2 and y-size/2 < 2450-mouseY < y+size/2 
			push()
			fill 'black'
			text "#{x} vs #{y} => #{abs x-y}" ,width/2,150 + 50*i
			i += 1
			pop()

window.keyPressed   = -> toggle = (toggle+1) % 3
window.mousePressed = -> toggle = (toggle+1) % 3

swiss_data =
"""
2416	1835
2416	1985
2416	2035
2416	2108
2416	2213
2416	2113
2416	2366
2416	2235
2366	1828
2366	1954
2366	2031
2366	2093
2366	2113
2366	2235
2366	2416
2366	2413
2272	1818
2272	1936
2272	1787
2272	1852
2272	2031
2272	1907
2272	2108
2272	2076
2413	1833
2413	2001
2413	1671
2413	1885
2413	2035
2413	2213
2413	2113
2413	2366
2235	1803
2235	1977
2235	1944
2235	2039
2235	2141
2235	2366
2235	2109
2235	2416
2093	1783
2093	1886
2093	1871
2093	2366
2093	1793
2093	1977
2093	1880
2093	2113
2048	1763
2048	1878
2048	1889
2048	2113
2048	1691
2048	2022
2048	1907
2048	2213
2035	1733
2035	1827
2035	2416
2035	1880
2035	2413
2035	1818
2035	1793
2035	1871
2141	1796
2141	1944
2141	1977
2141	2335
2141	2235
2141	2031
2141	2076
2141	2022
1793	2108
1793	1695
1793	2046
1793	2001
1793	2093
1793	2065
1793	2035
1793	2031
2076	1778
2076	1885
2076	1936
2076	2213
2076	1886
2076	2108
2076	2141
2076	2272
2335	1827
2335	1728
2335	1818
2335	2141
2335	1828
2335	1893
2335	1977
2335	2065
1923	1671
1923	1641
1923	1800
1923	1400
1923	2109
1923	1733
1923	1954
1923	2001
2113	1794
2113	1897
2113	2001
2113	2048
2113	2366
2113	2416
2113	2413
2113	2093
2213	1800
2213	1907
2213	2022
2213	2076
2213	2416
2213	2413
2213	1944
2213	2048
2108	1793
2108	1893
2108	1880
2108	2416
2108	1936
2108	2076
2108	2272
2108	1977
1977	1709
1977	2235
1977	2141
1977	1671
1977	1748
1977	2093
1977	2335
1977	2108
1907	1650
1907	2213
1907	1761
1907	1733
1907	2039
1907	2272
1907	2048
1907	1827
1936	1688
1936	2272
1936	2076
1936	1768
1936	2108
1936	1748
1936	1886
1936	1878
2065	1768
2065	1880
2065	1827
2065	1871
2065	1846
2065	1793
2065	1896
2065	2335
1818	2272
1818	1688
1818	2335
1818	1480
1818	1897
1818	2035
1818	1885
1818	1954
2039	1748
2039	1852
2039	1641
2039	2235
2039	1907
2039	1886
2039	2022
2039	1880
2109	1787
2109	1889
2109	1778
2109	1733
2109	1923
2109	1691
2109	2235
2109	1985
1985	1721
1985	2416
1985	1768
1985	1761
1985	1827
1985	1803
1985	1400
1985	2109
1944	1695
1944	2141
1944	2235
1944	1622
1944	1733
1944	1878
1944	2213
1944	1886
2046	1761
2046	1871
2046	1793
2046	1763
2046	1671
2046	1846
2046	1691
2046	1893
1897	1624
1897	2113
1897	1733
1897	1728
1897	1818
1897	1783
1897	1835
1897	1796
2031	1733
2031	1846
2031	2366
2031	1835
2031	2272
2031	2141
2031	1803
2031	1793
2022	1728
2022	1680
2022	2213
2022	1846
2022	1871
2022	2048
2022	2039
2022	2141
1871	1406
1871	2046
1871	2093
1871	2065
1871	2022
1871	1794
1871	1748
1871	2035
1748	2039
1748	1400
1748	1896
1748	1954
1748	1977
1748	1936
1748	1871
1748	1480
1896	1641
1896	1400
1896	1748
1896	1787
1896	1726
1896	1796
1896	2065
1896	1846
1846	1400
1846	2031
1846	1624
1846	2022
1846	2065
1846	2046
1846	1622
1846	1896
1880	1480
1880	2065
1880	2108
1880	2035
1880	1622
1880	2001
1880	2093
1880	2039
1886	1575
1886	2093
1886	1726
1886	1641
1886	2076
1886	2039
1886	1936
1886	1944
2001	1726
2001	2413
2001	2113
2001	1793
2001	1835
2001	1880
2001	1828
2001	1923
1827	2335
1827	2035
1827	2065
1827	1680
1827	1985
1827	1695
1827	1889
1827	1907
1691	1954
1691	1828
1691	1878
1691	1889
1691	2048
1691	2109
1691	2046
1691	1803
1803	2235
1803	1726
1803	1579
1803	1400
1803	1889
1803	1985
1803	2031
1803	1691
1893	1622
1893	2108
1893	1733
1893	1778
1893	1641
1893	2335
1893	1800
1893	2046
1878	1417
1878	2048
1878	1691
1878	1721
1878	1768
1878	1944
1878	1400
1878	1936
1641	1896
1641	1923
1641	2039
1641	1886
1641	1893
1641	1800
1641	1671
1641	1848
1400	1848
1400	1896
1400	1650
1400	1923
1400	1833
1400	1852
1400	1985
1400	1728
1768	2065
1768	1575
1768	1985
1768	1936
1768	1878
1768	1889
1768	1680
1768	1885
1728	2022
1728	2335
1728	1417
1728	1897
1728	1480
1728	1688
1728	1852
1728	1400
1787	2109
1787	1579
1787	2272
1787	1896
1787	1650
1787	1400
1787	1721
1787	1622
1761	2046
1761	1480
1761	1907
1761	1985
1761	1579
1761	1885
1761	1400
1761	1828
1796	2141
1796	1709
1796	1575
1796	1400
1796	1885
1796	1896
1796	1848
1796	1897
1400	1852
1400	1748
1400	1803
1400	1721
1400	1787
1400	1878
1400	1794
1954	1691
1954	2366
1954	1763
1954	1748
1954	1794
1954	1778
1954	1923
1954	1818
1733	2035
1733	1406
1733	1897
1733	1907
1733	1852
1733	1923
1733	1794
1733	1800
1889	1579
1889	2109
1889	2048
1889	1691
1889	1803
1889	1768
1889	1827
1889	1783
1835	2416
1835	1721
1835	1400
1835	2031
1835	2001
1835	1726
1835	1897
1835	1733
1852	1400
1852	2039
1852	1680
1852	2272
1852	1733
1852	1400
1852	1728
1852	1624
1480	1880
1480	1761
1480	1783
1480	1818
1480	1728
1480	1671
1480	1778
1480	1748
1733	2031
1733	1833
1733	1893
1733	2109
1733	1944
1733	1848
1733	1709
1733	1835
1800	2213
1800	1650
1800	1923
1800	1833
1800	1624
1800	1641
1800	1893
1800	1733
1783	2093
1783	1622
1783	1480
1783	1575
1783	1680
1783	1897
1783	1695
1783	1889
1726	2001
1726	1803
1726	1886
1726	1848
1726	1896
1726	1835
1726	1833
1726	1721
1778	2076
1778	1524
1778	2109
1778	1893
1778	1763
1778	1954
1778	1480
1778	1833
1885	1524
1885	2076
1885	1709
1885	2413
1885	1796
1885	1761
1885	1818
1885	1768
1828	2366
1828	1691
1828	1688
1828	1624
1828	2335
1828	1709
1828	2001
1828	1761
1622	1893
1622	1783
1622	1848
1622	1944
1622	1880
1622	1763
1622	1846
1622	1787
1794	2113
1794	1624
1794	1524
1794	1709
1794	1954
1794	1871
1794	1733
1794	1400
1400	1846
1400	1835
1400	1796
1400	1709
1400	1650
1400	1761
1400	1763
1848	1400
1848	1671
1848	1622
1848	1726
1848	1688
1848	1733
1848	1796
1848	1641
1709	1977
1709	1796
1709	1885
1709	1794
1709	1400
1709	1828
1709	1733
1709	1680
1650	1907
1650	1800
1650	1400
1650	1695
1650	1787
1650	1400
1650	1417
1650	1579
1575	1886
1575	1768
1575	1796
1575	1783
1575	1524
1575	1624
1575	1688
1671	1923
1671	1848
1671	2413
1671	1977
1671	2046
1671	1480
1671	1641
1671	1524
1833	2413
1833	1733
1833	1695
1833	1800
1833	1400
1833	1579
1833	1726
1833	1778
1624	1897
1624	1794
1624	1846
1624	1828
1624	1800
1624	1575
1624	1524
1624	1852
1680	2022
1680	1852
1680	1827
1680	1783
1680	1406
1680	1768
1680	1709
1721	1985
1721	1835
1721	1406
1721	1878
1721	1400
1721	1417
1721	1787
1721	1726
1763	2048
1763	1417
1763	1954
1763	2046
1763	1778
1763	1622
1763	1579
1763	1400
1688	1936
1688	1818
1688	1828
1688	1417
1688	1848
1688	1728
1688	1406
1688	1575
1695	1944
1695	1793
1695	1833
1695	1650
1695	1406
1695	1827
1695	1783
1695	2416
1417	1878
1417	1763
1417	1728
1417	1688
1417	1721
1417	1650
1417	1406
1579	1889
1579	1787
1579	1803
1579	1524
1579	1761
1579	1833
1579	1763
1579	1650
1524	1885
1524	1778
1524	1794
1524	1579
1524	1575
1524	1624
1524	1671
1406	1871
1406	1733
1406	1721
1406	1695
1406	1680
1406	1688
1406	1417
"""

elo_data = 
"""
2416	2413
2416	2366
2416	2335
2416	2213
2416	2272
2416	2235
2416	2113
2416	2108
2413	2416
2413	2335
2413	2366
2413	2108
2413	2235
2413	2272
2413	2213
2413	2113
2366	2335
2366	2416
2366	2413
2366	2272
2366	2213
2366	2113
2366	2235
2366	2076
2335	2366
2335	2413
2335	2416
2335	2235
2335	2113
2335	2213
2335	2272
2335	2031
2272	2235
2272	2213
2272	2141
2272	2366
2272	2416
2272	2413
2272	2335
2272	2109
2235	2272
2235	2141
2235	2213
2235	2335
2235	2413
2235	2416
2235	2366
2235	2093
2213	2141
2213	2272
2213	2235
2213	2416
2213	2366
2213	2335
2213	2413
2213	2065
2141	2213
2141	2235
2141	2272
2141	2113
2141	2109
2141	2076
2141	2108
2141	2001
2113	2109
2113	2108
2113	2093
2113	2141
2113	2335
2113	2366
2113	2416
2113	2413
2109	2113
2109	2093
2109	2108
2109	2048
2109	2141
2109	2022
2109	2076
2109	2272
2108	2093
2108	2113
2108	2109
2108	2413
2108	2076
2108	2065
2108	2141
2108	2416
2093	2108
2093	2109
2093	2113
2093	2076
2093	2065
2093	2039
2093	2048
2093	2235
2076	2065
2076	2048
2076	2046
2076	2093
2076	2108
2076	2141
2076	2109
2076	2366
2065	2076
2065	2046
2065	2048
2065	2031
2065	2093
2065	2108
2065	2039
2065	2213
2048	2046
2048	2076
2048	2065
2048	2109
2048	2039
2048	2035
2048	2093
2048	2022
2046	2048
2046	2065
2046	2076
2046	2039
2046	2035
2046	2001
2046	2031
2046	1977
2039	2035
2039	2031
2039	2022
2039	2046
2039	2048
2039	2093
2039	2065
2039	1985
2035	2039
2035	2022
2035	2031
2035	1977
2035	2046
2035	2048
2035	2001
2035	1944
2031	2022
2031	2039
2031	2035
2031	2065
2031	2001
2031	1985
2031	2046
2031	2335
2022	2031
2022	2035
2022	2039
2022	2001
2022	1985
2022	2109
2022	1977
2022	2048
2001	1985
2001	1977
2001	1954
2001	2022
2001	2031
2001	2046
2001	2035
2001	2141
1985	2001
1985	1954
1985	1977
1985	1923
1985	2022
1985	2031
1985	1944
1985	2039
1977	1954
1977	2001
1977	1985
1977	2035
1977	1944
1977	1936
1977	2022
1977	2046
1954	1977
1954	1985
1954	2001
1954	1944
1954	1936
1954	1897
1954	1923
1954	1893
1944	1936
1944	1923
1944	1907
1944	1954
1944	1977
1944	1880
1944	1985
1944	2035
1936	1944
1936	1907
1936	1923
1936	1893
1936	1954
1936	1977
1936	1897
1936	1886
1923	1907
1923	1944
1923	1936
1923	1985
1923	1897
1923	1896
1923	1954
1923	1889
1907	1923
1907	1936
1907	1944
1907	1897
1907	1896
1907	1886
1907	1893
1907	1880
1897	1896
1897	1893
1897	1889
1897	1907
1897	1923
1897	1954
1897	1936
1897	1878
1896	1897
1896	1889
1896	1893
1896	1880
1896	1907
1896	1923
1896	1886
1896	1871
1893	1889
1893	1897
1893	1896
1893	1936
1893	1886
1893	1885
1893	1907
1893	1954
1889	1893
1889	1896
1889	1897
1889	1886
1889	1885
1889	1871
1889	1880
1889	1923
1886	1885
1886	1880
1886	1878
1886	1889
1886	1893
1886	1907
1886	1896
1886	1936
1885	1886
1885	1878
1885	1880
1885	1848
1885	1889
1885	1893
1885	1871
1885	1835
1880	1878
1880	1886
1880	1885
1880	1896
1880	1871
1880	1944
1880	1889
1880	1907
1878	1880
1878	1885
1878	1886
1878	1871
1878	1852
1878	1835
1878	1848
1878	1897
1871	1852
1871	1848
1871	1846
1871	1878
1871	1880
1871	1889
1871	1885
1871	1896
1852	1871
1852	1846
1852	1848
1852	1828
1852	1878
1852	1827
1852	1835
1852	1818
1848	1846
1848	1871
1848	1852
1848	1885
1848	1835
1848	1833
1848	1878
1848	1827
1846	1848
1846	1852
1846	1871
1846	1835
1846	1833
1846	1818
1846	1828
1846	1794
1835	1833
1835	1828
1835	1827
1835	1846
1835	1848
1835	1878
1835	1852
1835	1885
1833	1835
1833	1827
1833	1828
1833	1800
1833	1846
1833	1848
1833	1818
1833	1787
1828	1827
1828	1835
1828	1833
1828	1852
1828	1818
1828	1803
1828	1846
1828	1793
1827	1828
1827	1833
1827	1835
1827	1818
1827	1803
1827	1852
1827	1800
1827	1848
1818	1803
1818	1800
1818	1796
1818	1827
1818	1828
1818	1846
1818	1833
1818	1852
1803	1818
1803	1796
1803	1800
1803	1787
1803	1827
1803	1828
1803	1794
1803	1778
1800	1796
1800	1818
1800	1803
1800	1833
1800	1794
1800	1793
1800	1827
1800	1783
1796	1800
1796	1803
1796	1818
1796	1794
1796	1793
1796	1778
1796	1787
1796	1763
1794	1793
1794	1787
1794	1783
1794	1796
1794	1800
1794	1763
1794	1803
1794	1846
1793	1794
1793	1783
1793	1787
1793	1763
1793	1796
1793	1800
1793	1778
1793	1828
1787	1783
1787	1794
1787	1793
1787	1803
1787	1778
1787	1768
1787	1796
1787	1833
1783	1787
1783	1793
1783	1794
1783	1778
1783	1768
1783	1748
1783	1763
1783	1800
1778	1768
1778	1763
1778	1761
1778	1783
1778	1787
1778	1796
1778	1793
1778	1803
1768	1778
1768	1761
1768	1763
1768	1726
1768	1783
1768	1787
1768	1748
1768	1733
1763	1761
1763	1778
1763	1768
1763	1793
1763	1748
1763	1794
1763	1783
1763	1796
1761	1763
1761	1768
1761	1778
1761	1748
1761	1733
1761	1709
1761	1733
1761	1721
1748	1733
1748	1733
1748	1721
1748	1761
1748	1763
1748	1783
1748	1768
1748	1728
1733	1728
1733	1748
1733	1733
1733	1721
1733	1726
1733	1695
1733	1761
1733	1768
1733	1748
1733	1726
1733	1733
1733	1728
1733	1761
1733	1691
1733	1721
1733	1709
1728	1733
1728	1721
1728	1726
1728	1733
1728	1709
1728	1680
1728	1691
1728	1748
1726	1721
1726	1733
1726	1728
1726	1768
1726	1733
1726	1688
1726	1709
1726	1624
1721	1726
1721	1728
1721	1748
1721	1733
1721	1695
1721	1671
1721	1733
1721	1761
1709	1695
1709	1691
1709	1688
1709	1650
1709	1728
1709	1761
1709	1726
1709	1733
1695	1709
1695	1688
1695	1691
1695	1641
1695	1721
1695	1733
1695	1680
1695	1524
1691	1688
1691	1709
1691	1695
1691	1680
1691	1671
1691	1733
1691	1728
1691	1622
1688	1691
1688	1695
1688	1709
1688	1671
1688	1680
1688	1726
1688	1650
1688	1480
1680	1671
1680	1650
1680	1641
1680	1691
1680	1688
1680	1728
1680	1695
1680	1579
1671	1680
1671	1641
1671	1650
1671	1688
1671	1691
1671	1721
1671	1624
1671	1406
1650	1641
1650	1680
1650	1671
1650	1709
1650	1624
1650	1480
1650	1688
1650	1575
1641	1650
1641	1671
1641	1680
1641	1695
1641	1524
1641	1624
1641	1406
1641	1417
1624	1622
1624	1579
1624	1575
1624	1417
1624	1650
1624	1641
1624	1671
1624	1726
1622	1624
1622	1575
1622	1579
1622	1406
1622	1480
1622	1524
1622	1417
1622	1691
1579	1575
1579	1624
1579	1622
1579	1524
1579	1417
1579	1406
1579	1480
1579	1680
1575	1579
1575	1622
1575	1624
1575	1480
1575	1406
1575	1417
1575	1524
1575	1650
1524	1480
1524	1417
1524	1406
1524	1579
1524	1641
1524	1622
1524	1575
1524	1695
1480	1524
1480	1406
1480	1417
1480	1575
1480	1622
1480	1650
1480	1579
1480	1688
1417	1406
1417	1524
1417	1480
1417	1624
1417	1579
1417	1575
1417	1622
1417	1641
1406	1417
1406	1480
1406	1524
1406	1622
1406	1575
1406	1579
1406	1641
1406	1671
"""